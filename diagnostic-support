diagnostic() {
  local MESOS_MASTER_IP="$(ls -d -w1 *_master | head -n 1 | sed 's/_master//')"
  local MARATHON_LEADER_FILE=$(find *_master/*v2_leader.json.gz | head -n 1)
  export BUNDLE_PORT_DELIMITER=$(basename $MARATHON_LEADER_FILE | sed 's/[0-9]//g' | head -c 1)
  local MARATHON_LEADER_IP=$(gzcat "$MARATHON_LEADER_FILE" | jq .leader -r | cut -f 1 -d ":")
  local MARATHON_LEADER_PORT=$(basename $MARATHON_LEADER_FILE | cut -f 1 -d "$BUNDLE_PORT_DELIMITER")
  local MARATHON_LEADER="$MARATHON_LEADER_IP:$MARATHON_LEADER_PORT"
  echo "Mesos Master IP is $MESOS_MASTER_IP"
  echo "Marathon leader is $MARATHON_LEADER"
  export MESOS_CURL_CMD=diagnostic-curl-mesos
  export MARATHON_CURL_CMD=diagnostic-curl-marathon
  export MESOS_MASTER_URL=http://${MESOS_MASTER_IP}:5050
  export MARATHON_MASTER_URL=http://${MARATHON_LEADER}
}
